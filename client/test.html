<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>IRO Test</title>
    <style>

    </style>
</head>
<body>

<input id="urlInput" type="text" value="http://192.168.0.25">

<a href="#" onclick="testRingMode()">Test ring mode</a>
<a href="#" onclick="testGaugeMode()">Test gauge mode</a>
<a href="#" onclick="testConnectionMode()">Test connection mode</a>

<script>

    const colors = [
        [0x00, 0xbc, 0xd4],
        [0x21, 0x96, 0xf3],
        [0x3f, 0x51, 0xb5],
        [0x67, 0x3a, 0xb7],
        [0x9c, 0x27, 0xb0],
        [0xe9, 0x1e, 0x63],
        [0xf4, 0x43, 0x36],
        [0xff, 0x57, 0x22],
        [0xff, 0x98, 0x00],
        [0xff, 0xc1, 0x07],
        [0xff, 0xeb, 0x3b],
        [0xcd, 0xdc, 0x39],
        [0x8b, 0xc3, 0x4a],
        [0x4b, 0xaf, 0x4f],
        [0x00, 0x96, 0x88],
        [0x9e, 0x9e, 0x9e],
        [0x60, 0x7d, 0x8b],
        [0x79, 0x55, 0x48],
        [0x97, 0x6a, 0x5a]
    ];

    let colorIndex = 0;

    getURL = () => {
        return document.getElementById("urlInput").value;
    };

    testRingMode = () => {
        const url = getURL();
        const request = new XMLHttpRequest();
        const red = colors[colorIndex][0];
        const green = colors[colorIndex][1];
        const blue = colors[colorIndex][2];
        request.open("GET", `${url}/ring?foreground=r${red}g${green}b${blue}`);
        request.send(null);
        colorIndex = (colorIndex + 1) % colors.length;
    };

    testGaugeMode = () => {
        const url = getURL();
        const request = new XMLHttpRequest();
        const red = colors[colorIndex][0];
        const green = colors[colorIndex][1];
        const blue = colors[colorIndex][2];
        const value = Math.round(Math.random() * 23);
        request.open("GET", `${url}/gauge?foreground=r${red}g${green}b${blue}&background=r${blue}g${red}b${green}&value=${value}`);
        request.send(null);
        colorIndex = (colorIndex + 1) % colors.length;
    };

    testConnectionMode = () => {
        const url = getURL();
        const request = new XMLHttpRequest();
        request.open("GET", `${url}/`);
        request.send(null);
    };

</script>

</body>
</html>